export const incrementAiReport = () => ({ type: "INCREMENT_AI_REPORT" }); 
export const incrementApiInteraction = () => ({ type: "INCREMENT_API_INTERACTION" });
export const setCounters = (counterAiReport, counterApiInteraction) => ({
    type: "SET_COUNTERS",
    payload: { counterAiReport, counterApiInteraction },
  });



  import { getProDetails } from "../apis/SummaryOneAPI";

// helper to update server
const updateUserProDetails = async (obj) => {
  try {
    const { data } = await getProDetails.put(obj);
    console.log("Updated:", data);
  } catch (err) {
    console.error("Update failed", err);
  }
};

export const incrementAiReport = () => (dispatch, getState) => {
  const newValue = getState().counter.counterAiReport + 1;

  // update localStorage
  localStorage.setItem("counterAiReport", newValue);

  // update API
  updateUserProDetails({ counter_ai_report: newValue });

  dispatch({ type: "INCREMENT_AI_REPORT" });
};

export const incrementApiInteraction = () => (dispatch, getState) => {
  const newValue = getState().counter.counterApiInteraction + 1;

  localStorage.setItem("counterApiInteraction", newValue);
  updateUserProDetails({ counter_interactions: newValue });

  dispatch({ type: "INCREMENT_API_INTERACTION" });
};

export const setCounters = (payload) => (dispatch) => {
  localStorage.setItem("counterAiReport", payload.counterAiReport);
  localStorage.setItem("counterApiInteraction", payload.counterApiInteraction);

  dispatch({ type: "SET_COUNTERS", payload });
};
